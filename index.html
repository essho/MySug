<!DOCTYPE html>

<html lang="ar" dir="rtl">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>ØªØ·Ø¨ÙŠÙ‚ Ø³ÙƒØ±ÙŠ</title>

Â  Â  <link rel="manifest" href="./manifest.json">

Â  Â  <style>

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  text-align: right;

Â  Â  Â  Â  Â  Â  direction: rtl;

Â  Â  Â  Â  }

Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  max-width: 600px;

Â  Â  Â  Â  Â  Â  margin: auto;

Â  Â  Â  Â  Â  Â  background: #f9f9f9;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.1);

Â  Â  Â  Â  }

Â  Â  Â  Â  h1, h2 {

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group {

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group label {

Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  Â  Â  margin-bottom: 5px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group input, .input-group select {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 8px;

Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;

Â  Â  Â  Â  Â  Â  border-radius: 4px;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }

Â  Â  Â  Â  .main-buttons {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: space-between;

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .main-buttons a, .main-buttons button {

Â  Â  Â  Â  Â  Â  flex-grow: 1;

Â  Â  Â  Â  Â  Â  padding: 10px 15px;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 4px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  text-decoration: none;

Â  Â  Â  Â  Â  Â  color: #fff;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }

Â  Â  Â  Â  #addBtn {

Â  Â  Â  Â  Â  Â  background-color: #28a745;

Â  Â  Â  Â  }

Â  Â  Â  Â  #alertsBtn {

Â  Â  Â  Â  Â  Â  background-color: #ffc107;

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  }

Â  Â  Â  Â  #analyticsBtn {

Â  Â  Â  Â  Â  Â  background-color: #007bff;

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>

Â  Â  <div class="container">

Â  Â  Â  Â  <h1>ØªØ·Ø¨ÙŠÙ‚ Ø³ÙƒØ±ÙŠ</h1>

Â  Â  Â  Â  <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.</p>

Â  Â  Â  Â  <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙŠØ¶</h2>

Â  Â  Â  Â  <form id="patientForm">

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="name">Ø§Ù„Ø§Ø³Ù…:</label>

Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="name" name="name" required>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="age">Ø§Ù„Ø¹Ù…Ø±:</label>

Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="age" name="age" required>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="weight">Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…):</label>

Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="weight" name="weight" required>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="insulinType">Ù†ÙˆØ¹ Ø§Ù„Ø£Ù†Ø³ÙˆÙ„ÙŠÙ†:</label>

Â  Â  Â  Â  Â  Â  Â  Â  <select id="insulinType" name="insulinType" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø£Ù†Ø³ÙˆÙ„ÙŠÙ†</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="long-acting">Ø·ÙˆÙŠÙ„ Ø§Ù„Ù…ÙØ¹ÙˆÙ„</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="short-acting">Ù‚ØµÙŠØ± Ø§Ù„Ù…ÙØ¹ÙˆÙ„</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="mixed">Ù…Ø®ØªÙ„Ø·</option>

Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button type="submit" style="display: none;"></button>

Â  Â  Â  Â  </form>

Â  Â  Â  Â  <div class="main-buttons">

Â  Â  Â  Â  Â  Â  <a href="day.html" id="addBtn">+ Ø¥Ø¶Ø§ÙØ©</a>

Â  Â  Â  Â  Â  Â  <a href="alerts.html" id="alertsBtn">ğŸ”” Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a>

Â  Â  Â  Â  Â  Â  <a href="analytics.html" id="analyticsBtn">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</a>

Â  Â  Â  Â  </div>

Â  Â  </div>

Â  Â  <script src="main.js"></script>

Â  Â  <script>

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', async () => {

Â  Â  Â  Â  Â  Â  const patientForm = document.getElementById('patientForm');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  async function savePatientData(data) {

Â  Â  Â  Â  Â  Â  Â  Â  await openDatabase();

Â  Â  Â  Â  Â  Â  Â  Â  const transaction = db.transaction([PATIENT_STORE_NAME], 'readwrite');

Â  Â  Â  Â  Â  Â  Â  Â  const store = transaction.objectStore(PATIENT_STORE_NAME);

Â  Â  Â  Â  Â  Â  Â  Â  const request = store.put({ id: 'patient', ...data });

Â  Â  Â  Â  Â  Â  Â  Â  return new Promise((resolve, reject) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  request.onsuccess = () => resolve();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  request.onerror = (event) => reject(event.target.error);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  async function loadPatientData() {

Â  Â  Â  Â  Â  Â  Â  Â  await openDatabase();

Â  Â  Â  Â  Â  Â  Â  Â  const transaction = db.transaction([PATIENT_STORE_NAME], 'readonly');

Â  Â  Â  Â  Â  Â  Â  Â  const store = transaction.objectStore(PATIENT_STORE_NAME);

Â  Â  Â  Â  Â  Â  Â  Â  const request = store.get('patient');

Â  Â  Â  Â  Â  Â  Â  Â  return new Promise((resolve, reject) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  request.onsuccess = (event) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const patientData = event.target.result;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (patientData) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('name').value = patientData.name || '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('age').value = patientData.age || '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('weight').value = patientData.weight || '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('insulinType').value = patientData.insulinType || '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  request.onerror = (event) => reject(event.target.error);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  patientForm.addEventListener('submit', async function(event) {

Â  Â  Â  Â  Â  Â  Â  Â  event.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  const patientData = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: document.getElementById('name').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  age: document.getElementById('age').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  weight: document.getElementById('weight').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  insulinType: document.getElementById('insulinType').value

Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  await savePatientData(patientData);

Â  Â  Â  Â  Â  Â  Â  Â  alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  loadPatientData();

Â  Â  Â  Â  Â  Â  if ('serviceWorker' in navigator) {

Â  Â  Â  Â  Â  Â  Â  Â  window.addEventListener('load', function() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navigator.serviceWorker.register('./service-worker.js', { scope: './' }).then(function(registration) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('ServiceWorker registration successful with scope: ', registration.scope);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, function(err) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('ServiceWorker registration failed: ', err);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  });

Â  Â  </script>



<div style="margin-top:18px; display:flex; gap:10px;">

Â  <button id="backupBtn" style="flex:1; padding:10px; border:none; border-radius:6px; background:#6c757d; color:white; font-weight:bold;">ğŸ’¾ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ</button>

Â  <label for="restoreFile" style="flex:1; padding:10px; border-radius:6px; background:#17a2b8; color:white; font-weight:bold; text-align:center; cursor:pointer;">ğŸ”„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª</label>

Â  <input id="restoreFile" type="file" accept=".json" style="display:none;">

</div>

</body>

</html>